"0","cesta <- '~/Documents/R/Finance050'"
"0","f <- list.files(cesta, full.names = TRUE, pattern = 'csv')"
"0","SAP <- NULL"
"0","for(s in f){ # základní logika načtení souboru"
"0","  fname <- basename(s)"
"0","  t <- str_split(fname, pattern = '\\.')"
"0","  t <- t[[1]]"
"0","  t <- str_split(t[1], pattern = ' ')"
"0","  t <- t[[1]]"
"0","  rok <- as.numeric(t[1])"
"0","  mesic <- as.numeric(t[3])"
"0","  t <- read.csv(s, header = TRUE, sep = ';', encoding = 'UTF-8')"
"0","  t <- t %>%"
"0","    rename(proc_plneni = X..plnění.plánu) %>%"
"0","    mutate(rok = rok,"
"0","           mesic = mesic)"
"0","  t$Rozdíl.Pl.Sk <- ek2Number(t$Rozdíl.Pl.Sk)"
"0","  t$Skutečnost <- ek2Number(t$Skutečnost)"
"0","  t$Nákladové.druhy.Zdroje <- str_trim(t$Nákladové.druhy.Zdroje)"
"0","  #1. vytvoř číselníky kategorií - každá tab. bohužel může mít jinou strukturu číselníku ... bohužel"
"0","  kategorie <- unique(t$Nákladové.druhy.Zdroje) # obsahuje všechny kategorie"
"0","  zaklKat <- kategorie[grepl(""\\*"", kategorie)]   # obsahuje pouze hlavní (začínají na *)"
"0","  if(is.null(SAP)){"
"0","    #2. spusť transformaci souboru"
"0","    SAP <- kat2df(t)"
"0","  }else{"
"0","    SAP <- rbind(SAP, kat2df(t))"
"0","  }"
"0","}"
"0","SAP <- arrange(SAP, as.numeric(rok), as.numeric(mesic))"
"0","SAP$rok.mesic <- paste(SAP$rok, '-', str_pad(SAP$mesic, 2, pad = ""0""), sep = '')"
"0","# finální seznamy SAP prvků"
"0","kategorie <- unique(str_trim(SAP$Nákladové.druhy.Zdroje)) # obsahuje všechny kategorie"
"0","zaklKat <- kategorie[grepl(""\\*"", kategorie)]   # obsahuje pouze hlavní (začínají na *)"
